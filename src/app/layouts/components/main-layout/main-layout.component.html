<div style="position: relative;">
    <div class="offCanvas hide-on-print" [ngClass]="{'show': is_close}" *ngIf="sidebarOptions != null">
        <app-sidebar-menu [is_close]="is_close" *ngIf="sidebarOptions == 'General'">
        </app-sidebar-menu>
        <app-sidebar-pengaturan [is_close]="is_close" *ngIf="sidebarOptions == 'Pengaturan'">
        </app-sidebar-pengaturan>
    </div>
    <div class="home" id="home-on-print">
        <div>
            <nav class="navbar navbar-expand-lg" id="page-topbar">
                <div class="container-fluid navbar-top justify-content-end" [ngClass]="{removePadding: isClickNotif}">
                    <div class="d-flex notifikasi" [ngClass]="{width100: isClickNotif}">
                        <div class="dropdown d-inline-block dropdown-notifikasi" [ngClass]="{width100: isClickNotif}"
                            ngbDropdown (openChange)="setCloseNotif()">
                            <button type="button" class="btn header-item text-dark" id="page-header-user-dropdown"
                                [ngClass]="{width100: isClickNotif,btnBlueCus: isClickNotif}" ngbDropdownToggle>
                                <div class="btn-notif" [ngClass]="{'notif-aktif': is_close_notif}"
                                    *ngIf="!isClickNotif">
                                    <div style="-webkit-mask: url(assets/icon/png/sidebar/notifikasi.png) center/contain;
                                        mask: url(assets/icon/png/sidebar/notifikasi.png) center/contain;" class="iconTopbar">
                                    </div>
                                    <div class="icon-badge" *ngIf="unmarked_notifications > 0">
                                        {{unmarked_notifications}}
                                    </div>
                                </div>
                                <div *ngIf="isClickNotif" style="text-align: left;color: white;"
                                    class="d-flex justify-content-between">
                                    <div>
                                        Notifikasi
                                    </div>
                                    <div>
                                        <i class="mdi mdi-chevron-down"></i>
                                    </div>
                                </div>
                            </button>
                            <div class="dropdown-menu-right  p-0 conDropdownProfil" ngbDropdownMenu
                                style="border-radius: 5px;">
                                <div class="d-flex justify-content-between px-3 py-4">
                                    <div class=" font-size-16 text-bold m-0" *ngIf="!isClickNotif">
                                        Notifikasi
                                    </div>
                                    <a class="align-middle my-auto" *ngIf="unmarked_notifications > 0"
                                        (click)="readAllNotif();" role="button">
                                        Baca Semua
                                    </a>

                                </div>
                                <hr class="mx-2 my-0">

                                <div class="notifikasi-body mt-1 ms-1">
                                    <div class="pl-3 pt-3 pb-2 mt-1 d-flex" role="button"
                                        (click)="setExpandMessage(val)" (mouseover)='showActionNotif(val.id)'
                                        (mouseout)='hideActionNotif(val.id)' *ngFor="let val of listNotifikasi"
                                        [ngClass]="{'bg-soft-gray': val.marked == false}">
                                        <div class="icon-notifikasi">
                                            <div class="btn btn-soft-warning height-fit-content"
                                                *ngIf="val.notification_type == 'reminder'">
                                                <i class="fas fa-calendar-alt icon-warning"></i>
                                            </div>
                                            <div class="btn btn-soft-danger height-fit-content"
                                                *ngIf="val.notification_type == 'expired'">
                                                <i class="fas fa-calendar-alt icon-danger"></i>
                                            </div>
                                            <div class="btn btn-soft-blue height-fit-content"
                                                *ngIf="val.notification_type == 'comment'">
                                                <i class="fas fa-comment icon-blue"></i>
                                            </div>

                                        </div>
                                        <div class="main-notifikasi pl-3">
                                            <div class="text-bold font-size-14">{{val.title}}</div>
                                            <!-- <app-see-more [text]="val.message"></app-see-more> -->
                                            <p class="font-size-12"
                                                [innerHTML]="val.is_full || val.message.length < max_length_message ? val.message : (val.message | slice:0:max_length_message) + '...'">
                                            </p>
                                            <div class="pt-1">
                                                <div class="text-semi-bold font-size-12" *ngIf="val.date_diff >= 1">
                                                    {{val.date_diff}} hari yang lalu</div>
                                                <div class="text-semi-bold font-size-12" *ngIf="val.date_diff == 0">Hari
                                                    ini</div>
                                            </div>
                                        </div>
                                        <div class="hidden-div me-2" [id]="'action-notif-' + val.id">
                                            <div
                                                class="text-center p-0 align-center d-flex btn btn-border-thin bg-white">
                                                <i class="p-2 fas fa-check" *ngIf="!val.marked"
                                                    ngbTooltip="tandai telah dibaca" (click)="readNotif(val)"></i>
                                                <i class="p-2 fas fa-external-link-alt" ngbTooltip="buka notifikasi"
                                                    (click)="openNotif(val)"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="listNotifikasi.length < 1">
                                        <div class="p-4 mb-2 text-center">
                                            <i>Data Kosong</i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="profile-dropdown" ngbDropdown (openChange)="setCloseProfil()" *ngIf="!isClickNotif">

                            <!-- BUTTON -->
                            <button class="profile-btn" ngbDropdownToggle type="button">

                                <img *ngIf="user.avatar" [src]="user.avatar" class="profile-avatar" alt="Avatar">

                                <div *ngIf="!user.avatar" class="profile-initial">
                                    {{ user.name.charAt(0).toUpperCase() }}
                                </div>



                                <!-- Chevron -->
                                <i class="fa fa-chevron-down" aria-hidden="true"></i>


                            </button>

                            <!-- DROPDOWN -->
                            <div class="profile-menu dropdown-menu-right" ngbDropdownMenu>

                                <!-- HEADER -->
                                <div class="profile-header">

                                    <img *ngIf="user.avatar" [src]="user.avatar" class="profile-avatar-lg">

                                    <div *ngIf="!user.avatar" class="profile-initial-lg">
                                        {{ user.name.charAt(0).toUpperCase() }}
                                    </div>

                                    <div class="profile-name">{{ user.name }}</div>
                                    <div class="profile-email">{{ user.email }}</div>

                                </div>

                                <!-- ACTION -->
                                <div class="profile-action">
                                    <a class="profile-item" [routerLink]="['/pengaturan/informasi-akun']">
                                        <em class="fas fa-user-cog"></em>
                                        Pengaturan Pengguna
                                    </a>

                                    <a class="profile-item danger" (click)="logout()">
                                        <em class="fas fa-sign-out-alt"></em>
                                        Log Out
                                    </a>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>
            </nav>

            <div class="page-content p-res" (click)="checkCloseSidebar()">
                <router-outlet></router-outlet>
            </div>
        </div>
    </div>
</div>